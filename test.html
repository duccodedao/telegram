<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wallet | By BmassHD</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-dark/dark.css">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Wallet | BmassHD">
    <meta property="og:description" content="Ví 2">
    <meta property="og:image" content="/ton/nen.png">
    <meta property="og:url" content="/ton/ton.html">
    <meta property="og:type" content="website">
    
    <link rel="shortcut icon" href="logo1.png" type="image/png">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://static.okx.com/cdn/web3/web3-wallet-sdk.min.js"></script> <!-- Thêm SDK OKX -->
    
    <style>
        /* CSS của bạn không thay đổi */
    </style>
</head>
<body>

<div class="container">
    <div class="logo">BmassHD</div>
    <div class="connect-text">Kết nối ví của bạn để mở khóa thêm nhiều tính năng</div>
    <div class="connect-button" onclick="connectWallet()">
        <img src="/ton/wallet.png" alt="Wallet Icon">
        Connect Wallet
    </div>
</div>

<div class="footer">
    <!-- Nội dung footer của bạn không thay đổi -->
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    async function connectWallet() {
        try {
            // Kiểm tra nếu ví OKX có sẵn
            if (window.okxwallet) {
                const okxWallet = window.okxwallet;

                // Kết nối với ví
                await okxWallet.enable();

                // Lấy địa chỉ ví
                const accounts = await okxWallet.request({ method: 'eth_accounts' });
                
                // Kiểm tra nếu có tài khoản
                if (accounts.length > 0) {
                    const account = accounts[0];
                    Swal.fire({
                        icon: 'success',
                        title: 'Đã kết nối thành công!',
                        text: `Tài khoản của bạn: ${account}`,
                        background: '#1e1e1e',
                        color: '#ffffff',
                        showConfirmButton: true,
                        confirmButtonText: 'Đóng'
                    });
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Kết nối thất bại',
                        text: 'Không tìm thấy tài khoản nào',
                        background: '#1e1e1e',
                        color: '#ffffff',
                        showConfirmButton: true,
                        confirmButtonText: 'Đóng'
                    });
                }
            } else {
                Swal.fire({
                    icon: 'warning',
                    title: 'Không tìm thấy ví OKX',
                    text: 'Vui lòng cài đặt ví OKX để sử dụng tính năng này.',
                    background: '#1e1e1e',
                    color: '#ffffff',
                    showConfirmButton: true,
                    confirmButtonText: 'Đóng'
                });
            }
        } catch (error) {
            Swal.fire({
                icon: 'error',
                title: 'Đã xảy ra lỗi!',
                text: error.message,
                background: '#1e1e1e',
                color: '#ffffff',
                showConfirmButton: true,
                confirmButtonText: 'Đóng'
            });
        }
    }
</script>

</body>
</html>
